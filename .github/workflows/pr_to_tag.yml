name: Create a tag
on:
  pull_request:
    types: [closed]

permissions: write-all
  
jobs:
  create_tag_from_pr:
    if: github.event.pull_request.merged == true
    runs-on: ubuntu-latest    
    steps:
    - uses: actions/checkout@v4

    - name: Set ENV values from YAML
      uses: pietrobolcato/action-read-yaml@1.0.0
      id: info
      with:
          config: ${{ github.workspace }}/info.yaml

    - name: Create tag if not present
      continue-on-error: true
      run : |
        echo The PR was merged hope this works
        git tag ${{ steps.info.outputs['version'] }}
        git push --follow-tags
        
    #  uses: rickstaa/action-create-tag@v1
    #  id: "tag_create"
    #  continue-on-error: true
    #  with:
    #    tag: ${{ ENV.VERSION }}
    #    force_push_tag: true

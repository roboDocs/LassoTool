name: Create a tag
on:
  pull_request:
    types: [closed]

permissions: write-all
  
jobs:
  create_tag_from_pr:
    if: github.event.pull_request.merged == true
    runs-on: ubuntu-latest    
    steps:
    - uses: actions/checkout@v4

    - name: Read yaml
      uses: actions-tools/yaml-outputs@v2
      id: info-action
      with:
          file-path: info.yaml

    - name: Content yaml
      run : |
        echo ${{ steps.info-action.outputs }}
        echo ${{ steps.info-action.outputs.version }}

    - name: Create tag if not present
      uses: rickstaa/action-create-tag@v1
      continue-on-error: true
      with:
        tag: ${{ steps.info-action.outputs.version }}
        force_push_tag: true

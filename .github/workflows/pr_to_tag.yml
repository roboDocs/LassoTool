name: Create a tag
on:
  pull_request:
    types: [closed]

permissions: write-all
  
jobs:
  create_tag_from_pr:
    if: github.event.pull_request.merged == true
    runs-on: ubuntu-latest    
    steps:
    - uses: actions/checkout@v4

    - name: Read yaml
      uses: teunmooij/yaml@v1
      id: info
      with:
          from-file: info.yaml

    - name: Test yaml
      run : |
        echo ${{ steps.info.outputs.version }}

    - name: Create tag if not present
      uses: rickstaa/action-create-tag@v1
      continue-on-error: true
      with:
        tag: "${{ steps.info.outputs.version }}"
        force_push_tag: true
